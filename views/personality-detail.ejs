<%- include('header') %>

<nav aria-label="breadcrumb" class="mb-4">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Home</a></li>
    <li class="breadcrumb-item"><a href="/personality">Personality DB</a></li>
    <li class="breadcrumb-item active"><%= product.name %></li>
  </ol>
</nav>

<div class="row">
  <div class="col-md-8">
    <div class="card mb-4">
      <div class="card-header bg-success text-white">
        <h2 class="mb-0"><%= product.manufacturer %></h2>
      </div>
      <div class="card-body">
        <h4 class="card-title"><%= product.name %></h4>

        <div class="row mt-4">
          <div class="col-md-6">
            <h5>Basic Specifications</h5>
            <table class="table table-sm">
              <tr>
                <th>Load Capacity:</th>
                <td><%= product.loadCapacity || '-' %></td>
              </tr>
              <tr>
                <th>Lifting Speed:</th>
                <td><%= product.liftingSpeed || '-' %></td>
              </tr>
              <tr>
                <th>Category:</th>
                <td><span class="badge bg-secondary"><%= product.category %></span></td>
              </tr>
              <tr>
                <th>Speed Type:</th>
                <td>
                  <% if (product.speedType === 'Variable Speed') { %>
                    <span class="badge bg-success">Variable Speed</span>
                  <% } else if (product.speedType === 'Fixed Speed') { %>
                    <span class="badge bg-warning">Fixed Speed</span>
                  <% } else { %>
                    <span class="badge bg-secondary">Unknown</span>
                  <% } %>
                </td>
              </tr>
              <tr>
                <th>Entertainment Industry:</th>
                <td>
                  <% if (product.entertainmentIndustry) { %>
                    <span class="badge bg-info">Yes</span>
                  <% } else { %>
                    <span class="badge bg-light text-dark">No</span>
                  <% } %>
                </td>
              </tr>
            </table>
          </div>
          <div class="col-md-6">
            <h5>Speed Control Parameters</h5>
            <% if (product.variableSpeedControl) { %>
              <table class="table table-sm">
                <tr>
                  <th>Min Speed:</th>
                  <td><%= product.variableSpeedControl.minSpeed || '-' %></td>
                </tr>
                <tr>
                  <th>Max Speed:</th>
                  <td><%= product.variableSpeedControl.maxSpeed || '-' %></td>
                </tr>
                <tr>
                  <th>Default Speed:</th>
                  <td><%= product.variableSpeedControl.defaultSpeed || '-' %></td>
                </tr>
                <tr>
                  <th>Max Accel:</th>
                  <td><%= product.variableSpeedControl.maxAccel || '-' %></td>
                </tr>
                <tr>
                  <th>Max Decel:</th>
                  <td><%= product.variableSpeedControl.maxDecel || '-' %></td>
                </tr>
              </table>
            <% } else { %>
              <p class="text-muted">No speed control data available</p>
            <% } %>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-md-6">
            <h5>Load Parameters</h5>
            <table class="table table-sm">
              <tr>
                <th>Underload Limit:</th>
                <td><%= product.underloadLimit || '-' %></td>
              </tr>
              <tr>
                <th>Overload Limit:</th>
                <td><%= product.overloadLimit || '-' %></td>
              </tr>
              <tr>
                <th>Loadcell Scaling:</th>
                <td><%= product.loadcellScaling || '-' %></td>
              </tr>
              <tr>
                <th>Encoder Scaling:</th>
                <td><%= product.encoderScaling || '-' %></td>
              </tr>
            </table>
          </div>
          <div class="col-md-6">
            <h5>Tuning Parameters</h5>
            <% if (product.tuningParameters) { %>
              <table class="table table-sm">
                <% Object.entries(product.tuningParameters).forEach(function([key, value]) { %>
                  <tr>
                    <th><%= key %>:</th>
                    <td><%= value %></td>
                  </tr>
                <% }); %>
              </table>
            <% } else { %>
              <p class="text-muted">No tuning parameters available</p>
            <% } %>
          </div>
        </div>

        <% if (product.manufacturerWebsite) { %>
          <div class="mt-4">
            <a href="<%= product.manufacturerWebsite %>" target="_blank" class="btn btn-outline-primary">
              Visit Manufacturer Website
            </a>
          </div>
        <% } %>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card">
      <div class="card-header bg-info text-white">
        <h5 class="mb-0">Similar Products</h5>
      </div>
      <div class="card-body">
        <% if (similarProducts.length > 0) { %>
          <ul class="list-group list-group-flush">
            <% similarProducts.forEach(function(similar) { %>
              <li class="list-group-item">
                <a href="/personality/<%= similar.manufacturerId %>/<%= similar.productId %>">
                  <%= similar.name %>
                </a>
                <br>
                <small class="text-muted"><%= similar.loadCapacity || '' %></small>
              </li>
            <% }); %>
          </ul>
        <% } else { %>
          <p class="text-muted">No similar products found</p>
        <% } %>
      </div>
    </div>

    <div class="card mt-3">
      <div class="card-header bg-secondary text-white">
        <h5 class="mb-0">File Information</h5>
      </div>
      <div class="card-body">
        <table class="table table-sm">
          <tr>
            <th>File Name:</th>
            <td><small><%= product.fileName %></small></td>
          </tr>
          <tr>
            <th>Manufacturer ID:</th>
            <td><%= product.manufacturerId %></td>
          </tr>
          <tr>
            <th>Product ID:</th>
            <td><%= product.productId %></td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>

<%- include('footer') %>
